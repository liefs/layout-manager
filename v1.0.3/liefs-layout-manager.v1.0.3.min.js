var Handler=function(){function Handler(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}this.setArgsObj=setArgsObj;this.position=new Coord;this.isActive=true;this.selector=function(){return"#"+this.label};if(TypeOf(arguments[0]).slice(0,5)==="array"){this.myArgsObj=argsObj(arguments[0])}else this.myArgsObj=argsObj(arguments);this.label=this.setArgsObj("string",0,"LayoutGroup ");if("array_Layout"in this.myArgsObj){if("Layout"in this.myArgsObj)liefsError.badArgs("Layouts, OR Arrays of Layouts","Got Both","new Handler()");this.layouts=this.myArgsObj.array_Layout.shift();if(this.myArgsObj.array_Layout.length)new Handler(this.myArgsObj.array_Layout)}else if("Layout"in this.myArgsObj)this.layouts=this.myArgsObj.Layout;else liefsError.badArgs("Layouts, OR Arrays of Layouts","Got Both","new Handler()");if(isUniqueSelector(this.selector()))this.el=document.querySelectorAll(this.selector())[0];Handler.handlers.push(this)}Handler.iterator=function(){return Handler.handlers};Handler.prototype.iterator=function(){return this.layouts};Handler.prototype.toString=function(prefix,lf,pre){if(prefix===void 0){prefix=""}if(lf===void 0){lf="\n"}if(pre===void 0){pre="\t"}var i;var out=prefix+'H("'+this.label+'",'+lf;for(i=0;i<this.layouts.length;i++){out+=prefix+this.layouts[i].toString(prefix+pre);if(i<this.layouts.length-1)out+=",";out+=lf}out+=prefix+")";return out};Handler.watchForResizeEvent=function(){window.onresize=function(e){window.clearTimeout(Handler.callbackThrottleId);Handler.callbackThrottleId=window.setTimeout(Handler.resizeEvent(e),Handler.resizeCallbackThrottle)}};Handler.activate=function(){if(!Handler.isActive){Handler.isActive=true;setTimeout(function(){if(Handler.isActive)Handler.startHandler()},Handler.delayUntilStart)}};Handler.createDivList=function(){var ids;ids=Object.keys(Item.items);for(var i=0;i<ids.length;i++)if(Item.items[ids[i]][0].el)Handler.showObj[ids[i]]={el:Item.items[ids[i]][0].el,show:false};ids=Object.keys(Container.containers);for(var i=0;i<ids.length;i++)if(Container.containers[ids[i]].el)Handler.showObj[ids[i]]={el:Container.containers[ids[i]].el,show:false};var handlers=Handler.handlers;for(var i=0;i<handlers.length;i++)if(handlers[i].el)Handler.showObj[handlers[i].label]={el:handlers[i].el,show:false}};Handler.startHandler=function(){if(Handler.verbose)console.log("Handler Started");Handler.readUrl();if(!Handler.handlers.length)H("defaultHandler",L("defaultLayout",Container.root(),function(x,y){return true}));Handler.createDivList();Handler.watchForResizeEvent();Handler.resizeEvent();window.onpopstate=function(e){if(e.state)Handler.readUrl()}};Handler.readUrl=function(){var searchItem;var href=window.location.href;var ipagelist,keyslist,i,j;var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);Handler.urlParams={};while(match=search.exec(query))Handler.urlParams[decode(match[1])]=decode(match[2]);if(href.indexOf("#")>-1){var value=href.slice(href.indexOf("#")+1);var ikeys=Object.keys(Item.items);for(i=0;i<ikeys.length;i++){ipagelist=Item.items[ikeys[i]][0].pages;if(ipagelist){keyslist=[];for(j=0;j<ipagelist.length;j++)keyslist.push(ipagelist[j].label);if(keyslist.indexOf(value)!==-1){searchItem=Item.items[ikeys[i]][0];break}}}Handler.urlParams[searchItem?searchItem.label:"NotFound"]=href.slice(href.indexOf("#")+1)}var pageNames;var eachKey;var ukeys=Object.keys(Handler.urlParams);for(var i_1=0;i_1<ukeys.length;i_1++){eachKey=ukeys[i_1];if(Item.get(eachKey)&&Item.get(eachKey).pages){pageNames=Item.get(eachKey).pages.map(function(item){return item.label});if(pageNames.indexOf(Handler.urlParams[eachKey])>-1){Item.setPage(eachKey,Handler.urlParams[eachKey],false);if(Handler.verbose){console.log("Setting Page: "+eachKey+"\nTo: "+Handler.urlParams[eachKey]);Item.setPage(eachKey,Handler.urlParams[eachKey],false)}}else if(Handler.verbose)console.log("Existing Pages: "+eachKey+"\nHas no page: "+Handler.urlParams[eachKey])}else if(Handler.verbose)console.log("Key: "+eachKey+"\nValue: "+Handler.urlParams[eachKey]+" not used.")}};Handler.onPushState=function(){var urlObj={};var item;var postUrl="";var first=true;var href=window.location.href;if(href.indexOf("?")>-1)href=href.slice(0,href.indexOf("?"));if(href.indexOf("#")>-1)href=href.slice(0,href.indexOf("#"));var ikeys=Object.keys(Item.items);for(var i=0;i<ikeys.length;i++){item=Item.items[ikeys[i]][0];if(item.pages)urlObj[ikeys[i]]=item.pages[item.currentPage].label}if(Object.keys(urlObj).length===1){postUrl+="#"+urlObj[Object.keys(urlObj)[0]]}else if(Object.keys(urlObj).length>1){ikeys=Object.keys(urlObj);for(var i=0;i<ikeys.length;i++){postUrl+=(first?"?":"&")+ikeys[i]+"="+urlObj[ikeys[i]];first=false}}if(history.pushState&&window.location.href!==href+postUrl)history.pushState({},document.title,href+postUrl)};Handler.hideEl=function(itemEl){directiveSetStyles(itemEl,{visibility:"hidden",left:"1px",top:"1px",width:"1px",height:"1px"})};Handler.HideAllDragbars=function(container){var eachItem;for(var i=0;i<container.items.length;i++){eachItem=container.items[i];if(eachItem.dragBar)Handler.hideEl(eachItem.dragBar.el);if(eachItem.container)Handler.HideAllDragbars(eachItem.container)}};Handler.resizeEvent=function(e){if(e===void 0){e=null}var itemEl;var isEl;var eachHandler;var keys,eachKey;Handler.Hide();for(var i=0;i<Handler.handlers.length;i++){eachHandler=Handler.handlers[i];eachHandler.chooseContainer();eachHandler.update()}keys=Object.keys(Handler.showObj);for(var i=0;i<keys.length;i++){eachKey=keys[i];if(!Handler.showObj[eachKey].show){itemEl=Handler.showObj[eachKey].el;Handler.hideEl(itemEl)}}Handler.callback()};Handler.Hide=function(){var keys=Object.keys(Handler.showObj);for(var i=0;i<keys.length;i++)Handler.showObj[keys[i]].show=false};Handler.prototype.update=function(){var coord,pageItem,item;var itemLabel;this.activeContainer.update(this.position.width,this.position.height,this.position.x,this.position.y);var activeItemLabels=Object.keys(this.activeContainer.lastUpdate);for(var i=0;i<activeItemLabels.length;i++){itemLabel=activeItemLabels[i];if(itemLabel in Handler.showObj){item=this.activeContainer.itemByLabel(itemLabel);coord=this.activeContainer.lastUpdate[itemLabel];pageItem=Item.page(item);Handler.showObj[pageItem.label].show=true;directiveSetStyles(pageItem.el,{visibility:"visible",left:px(coord.x),top:px(coord.y),width:px(coord.width),height:px(coord.height)})}if(Item.get(itemLabel).dragBar)Item.get(itemLabel).dragBar.update()}};Handler.prototype.chooseContainer=function(){this.position.getSource(this.el);var keys=this.layouts;var eachLayout;for(var i=0;i<keys.length;i++){eachLayout=keys[i];if(eachLayout.conditionalFunction(this.position.width,this.position.height)){if(!this.activeContainer){if(Handler.verbose)console.log("Starting With Container: "+eachLayout.container.label)}else if(this.activeContainer.label!==eachLayout.container.label){if(Handler.verbose)console.log("Switched From Container :"+this.activeContainer.label+" to "+eachLayout.container.label);Handler.HideAllDragbars(this.activeContainer)}this.activeLayout=eachLayout;this.activeContainer=eachLayout.container;break}}if(!this.activeContainer){this.activeContainer=this.layouts[this.layouts.length-1].container;if(Handler.verbose)console.log("All Layout conditionalFunctions failed! Choosing last in list: "+this.activeContainer.label)}};return Handler}();Handler.handlers=[];Handler.isActive=false;Handler.resizeCallbackThrottle=0;Handler.delayUntilStart=200;Handler.showObj={};Handler.verbose=true;Handler.changeUrl=true;Handler.callback=function(){};Handler.title=function(){return document.title};function H(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}return new Handler(Arguments)}var liefsError={matchLength:function(expected,received,reference){if(reference===void 0){reference=""}var plus="";if(expected<0){expected*=-1;plus="or more "}throw{message:"Expected "+plus+expected.toString()+" received "+received.toString()+".",name:"Incorrect Number Of Arguments Error"}},typeMismatch:function(expected,received,reference){if(reference===void 0){reference=""}var msg=reference+" Expected type "+expected.replace("|"," or ")+" received type "+received+".";throw new TypeError(msg)},badArgs:function(expected,received,reference){if(reference===void 0){reference=""}throw reference+" Expected "+expected+" received "+received+"."}};function onEvent(el,eventType,eventFunction){if(!el)console.log("onEvent tried to attach to nothing");else{if(el.addEventListener)el.addEventListener(eventType,eventFunction,false);else if(el.attachEvent)el.attachEvent(eventType,eventFunction)}}function nthIndex(str,pat,n){var L=str.length,i=-1;while(n--&&i++<L){i=str.indexOf(pat,i);if(i<0)break}return i}function htmlToElement(html){var template=document.createElement("template");template.innerHTML=html;return template.content.firstChild}function occurrences(thisString,subString,allowOverlapping){if(allowOverlapping===void 0){allowOverlapping=false}thisString+="";subString+="";if(subString.length<=0)return thisString.length+1;var n=0,pos=0,step=allowOverlapping?1:subString.length;while(true){pos=thisString.indexOf(subString,pos);if(pos>=0){++n;pos+=step}else break}return n}function swapEl(source,replacement){source.parentNode.replaceChild(replacement,source)}function trimCompare(a,b){if(occurrences(b,":")<occurrences(a,":"))a=a.slice(0,nthIndex(a,":",occurrences(b,":")+1));return a===b}function isStart(value){return value.slice(-1)==="%"||value.slice(-2)==="px"}function px(value){return value.toString()+"px"}function vpx(value){return parseInt(value.slice(0,-2))}function TypeOf(value,match){if(match===void 0){match=undefined}var ctype=typeof value,temp;if(ctype==="object")if(Array.isArray(value))ctype="array:"+TypeOf(value[0]);else if(value["constructor"]&&value.constructor["name"]&&typeof value["constructor"]==="function"&&["Object","Array"].indexOf(value.constructor.name)===-1)ctype=value.constructor.name;else ctype="object:"+TypeOf(value[Object.keys(value)[0]]);else if(ctype==="string")if(isStart(value))ctype="start";if(match)if(match.indexOf("|")===-1)return trimCompare(ctype,match);else{var ms=match.split("|");for(var i=0;i<ms.length;i++)if(trimCompare(ctype,ms[i]))return true;return false}return ctype}function setArgsObj(key,index,ref){if(index===void 0){index=0}if(ref===void 0){ref=""}var target;if(!this.myArgsObj)throw"setArgsObj Empty";if(key in this.myArgsObj&&index<this.myArgsObj[key].length){target=this.myArgsObj[key][index]}return target}function argsObj(args){var retObj={},ctype;for(var i=0;i<args.length;i++){ctype=TypeOf(args[i]).replace(":","_");if(!(ctype in retObj))retObj[ctype]=[];retObj[ctype].push(args[i])}return retObj}function replaceAll(sstring,omit,place,prevstring){if(prevstring===void 0){prevstring=undefined}if(prevstring&&sstring===prevstring)return sstring;prevstring=sstring.replace(omit,place);return replaceAll(prevstring,omit,place,sstring)}function CheckArgTypes(args,types,reference,checkLength){if(reference===void 0){reference=""}if(checkLength===void 0){checkLength=true}reference+=" typeCheck";if(checkLength&&args.length!==types.length)liefsError.matchLength(types.length,args.length,reference);for(var i=0;i<types.length;i++)if(TypeOf(args[i])!==types[i])liefsError.typeMismatch(types[i],args[i],reference);return true}function el(id){CheckArgTypes(arguments,["string"],"el()");return document.getElementById(id)}function isUniqueSelector(selector){return document.querySelectorAll(selector).length===1}function directive(querrySelectorAll,attributesList){CheckArgTypes(arguments,["string","array:string"],"directive()");var returnArray=[];var Obj;var eachAttribute;var NodeList=document.querySelectorAll(querrySelectorAll);for(var i=0;i<NodeList.length;i++){Obj={el:NodeList[i],tagname:NodeList[i].tagName};for(var i_2=0;i_2<attributesList.length;i_2++){eachAttribute=attributesList[i_2];if(NodeList[i_2].getAttribute(eachAttribute)===undefined){Obj[eachAttribute]=undefined;if(NodeList[i_2].id!==undefined)for(var each in document.querySelectorAll("["+eachAttribute+"]"))if(each["id"]!==undefined)if(each["id"]===NodeList[i_2].id)Obj[eachAttribute]=true}else Obj[eachAttribute]=NodeList[i_2].getAttribute(eachAttribute)}returnArray.push(Objectassign(Obj))}return returnArray}function directiveSetStyles(el,stylesObject){var keys=Object.keys(stylesObject);for(var i=0;i<keys.length;i++)el["style"][keys[i]]=stylesObject[keys[i]]}function isItIn(key,object){var keys=Object.keys(object);if(keys.indexOf(key)===-1)return null;return object[key]}function Objectassign(obj){var ro={};for(var key in obj)ro[key]=obj[key];return ro}function myIndexOf(sstring,search,occurance,start){if(occurance){start=sstring.indexOf(search,start)+1;--occurance;if(occurance)return myIndexOf(sstring.slice(start),search,occurance,start);else return sstring.slice(start)}else return sstring}function screenSize(){var w=window,d=w.document,de=d.documentElement,db=d.body||d.getElementsByTagName("body")[0],x=w.innerWidth||de.clientWidth||db.clientWidth,y=w.innerHeight||de.clientHeight||db.clientHeight;return{x:x,y:y}}var CFL=[];function mymouseleave(){var element=document.getElementById("context");element.parentElement.removeChild(element)}function context(el,selectionList,stylestring){if(stylestring===void 0){stylestring=""}el.oncontextmenu=function(e){e.preventDefault();CFL=[];var ss=screenSize(),x=ss.x,y=ss.y,stylestring="",inner="",currentstring,currentFunction,oc,i,j,t;stylestring+="left:"+(e.clientX-10).toString()+"px;";stylestring+="top:"+(e.clientY-10).toString()+"px;";stylestring+="position: fixed; z-index: 1000;";var contextEl=document.createElement("div");contextEl.setAttribute("id","context");contextEl.style.cssText=stylestring;contextEl.onmouseleave=mymouseleave;for(i=0;i<selectionList.length;i++){currentstring=selectionList[i][0];currentFunction=selectionList[i][1];CFL.push(function(t){currentFunction(t);mymouseleave()});oc='onclick="CFL['+(CFL.length-1).toString()+'](this);"';if(currentstring.indexOf("<")===-1){currentstring="<div "+oc+">"+currentstring+"</div>"}else{j=currentstring.indexOf(">");t=currentstring.slice(0,j)+" "+oc+currentstring.slice(j);currentstring=t}inner+=currentstring+"\n"}contextEl.innerHTML=inner;document.body.appendChild(contextEl)}}var Coord=function(){function Coord(width,height,x,y){if(width===void 0){width=0}if(height===void 0){height=0}if(x===void 0){x=0}if(y===void 0){y=0}this.width=width;this.height=height;this.x=x;this.y=y}Coord.prototype.getSource=function(el,byRoot){if(byRoot===void 0){byRoot=true}if(!el){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0];this.width=w.innerWidth||e.clientWidth||g.clientWidth;this.height=w.innerHeight||e.clientHeight||g.clientHeight;this.x=0;this.y=0}else{this.width=el.style.width;this.height=el.style.height;var x=el.offsetLeft,y=el.offsetTop;if(byRoot)for(x=0,y=0;el!=null;x+=el.offsetLeft,y+=el.offsetTop,el=el.offsetParent);this.x=x;this.y=y}};return Coord}();var Dragbar=function(){function Dragbar(item,front,width){if(front===void 0){front=true}if(width===void 0){width=undefined}this.Selector=function(){return this.parent.selector()+" > ."+(this.parent.lastDirection?"H":"V")+"dragbar"};this.size=new Coord;this.front=true;var dragBarId=item.label+"Dragbar";Dragbar.drabarByIdObj[dragBarId]=this;this.parent=item;this.front=front;if(document.getElementById(dragBarId)){this.el=document.getElementById(dragBarId)}else{this.el=document.createElement("div");this.el.id=dragBarId;document.body.appendChild(this.el)}this.el.className=Container.of(item).direction?"Hdragbar":"Vdragbar";if(Dragbar.noInit){onEvent(document.body,"mouseup",Dragbar.mouseUp);onEvent(document.body,"mousemove",Dragbar.mouseMove);Dragbar.noInit=false}onEvent(this.el,"mousedown",Dragbar.mouseDown);this.width=width||Container.of(item).margin||Container.marginDefault;Dragbar.dragbars.push(this)}Dragbar.mouseDown=function(e){var dragbar=Item.get(e.srcElement.id.slice(0,-7)).dragBar;e.preventDefault();Dragbar.activeDragbar=dragbar;Dragbar.beforeCurrent=dragbar.parent.current;Dragbar.isDown=true;Dragbar.direction=Container.of(dragbar.parent).direction;Dragbar.dragstart=Dragbar.direction?e.clientX:e.clientY};Dragbar.mouseUp=function(e){Dragbar.isDown=false;Item.isDown=false};Dragbar.mouseMove=function(e){var dragDiff;var pItem;var newCurrent;if(Dragbar.isDown){event.preventDefault();pItem=Dragbar.activeDragbar.parent;dragDiff=(Dragbar.direction?e.clientX:e.clientY)-Dragbar.dragstart;dragDiff*=Dragbar.activeDragbar.front?1:-1;newCurrent=vpx(Dragbar.beforeCurrent)+dragDiff;if(pItem.min&&newCurrent<vpx(pItem.min))newCurrent=vpx(pItem.min);if(pItem.max&&newCurrent>vpx(pItem.max))newCurrent=vpx(pItem.max);pItem.current=newCurrent.toString()+"px";Handler.resizeEvent()}if(Item.isDown){event.preventDefault();dragDiff=e.clientX-Item.dragstart;if(dragDiff>Item.PageTriggerSize){Item.backPage(Item.activePage)}if(dragDiff<-Item.PageTriggerSize){Item.nextPage(Item.activePage)}Dragbar.mouseUp(e)}};Dragbar.prototype.update=function(){var keys=Object.keys(this.size);for(var i=0;i<keys.length;i++)this.size[keys[i]]=this.parent.size[keys[i]];if(this.parent.size)if(Container.of(this.parent).direction){this.size.x+=this.front?this.parent.size.width:-this.width;this.size.width=this.width}else{this.size.y+=this.front?this.parent.size.height:-this.width;this.size.height=this.width}directiveSetStyles(this.el,{visibility:"visible",left:px(this.size.x),top:px(this.size.y),width:px(this.size.width),height:px(this.size.height)})};return Dragbar}();Dragbar.drabarByIdObj={};Dragbar.dragbars=[];Dragbar.isDown=false;Dragbar.noInit=true;var Item=function(){function Item(label,start,min,max,container){if(min===void 0){min=undefined}if(max===void 0){max=undefined}if(container===void 0){container=undefined}this.swipe=true;this.lastDirection=true;this.selector=function(){return"#"+this.label};var el;this.label=label;this.current=this.start=start;if(min)this.min=min;if(max)this.max=max;if(container)this.container=container;if(!(label in Item.items))Item.items[label]=[];this.instance=Item.items[label].length;Item.items[label].push(this);if(typeof Handler==="function")Handler.activate();if(this.start==="0px")Container.suspectedRoot=this.container;if(min&&max){var that_1=this;setTimeout(function(){that_1.dragBar=new Dragbar(that_1)},0)}if(isUniqueSelector(this.selector())){this.el=document.querySelectorAll(this.selector())[0];this.el["style"]["position"]="fixed"}else if(!this.container&&!("jasmineTests"in window))liefsError.badArgs("Selector Search for '"+this.label+"' to find ONE matching div","Matched "+document.querySelectorAll(this.selector()).length.toString()+" times","Handler Item Check")}Item.iterator=function(){var ikeys=Item.keys();var returnList=[];for(var i=0;i<ikeys.length;i++)returnList.push(Item.get(ikeys[i]));return returnList};Item.mouseDown=function(e,item){if(item.swipe){Item.activePage=item;Item.isDown=true;Item.dragstart=e.clientX}};Item.get=function(label,InstanceNo){if(InstanceNo===void 0){InstanceNo=undefined}if(InstanceNo!==undefined)return Item.items[label][InstanceNo];var foundItem=undefined;var handler;for(var i=0;i<Handler.handlers.length;i++){handler=Handler.handlers[i];if(handler.activeContainer)foundItem=handler.activeContainer.itemByLabel(label);if(foundItem)return foundItem}if(Object.keys(Item.items).indexOf(label)>-1)return Item.items[label][0];return undefined};Item.h=function(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}Arguments.push("hor");return I.apply(void 0,Arguments)};Item.v=function(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}Arguments.push("ver");return I.apply(void 0,Arguments)};Item.keys=function(){return Object.keys(Item.items)};Item.I=function(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}var newItem;var myArgsObj=argsObj(arguments);var Ilabel,Istart,Imin,Imax,Imargin;var Iitems,Icontainer,IisHor;var isItem;var IpageTitle;var dragFront=true;var swipe=true;var eachArray;if("array_Item"in myArgsObj){if(!("Item"in myArgsObj))myArgsObj.Item=[];for(var i=0;i<myArgsObj["array_Item"].length;i++){eachArray=myArgsObj["array_Item"][i];for(var j=0;j<eachArray.length;j++)myArgsObj.Item.push(eachArray[j])}}if("number"in myArgsObj)Imargin=myArgsObj.number[0];if("string"in myArgsObj){for(var i=0;i<myArgsObj.string.length;i++){isItem=myArgsObj.string[i];if(isItem[0]==="*"){myArgsObj.string[i]=isItem.slice(1);dragFront=false}if(isItem[0]==="-"||isItem[0]==="|"){IisHor=isItem[0]==="-";myArgsObj.string[i]=isItem.slice(1)}if(isItem.slice(-1)==="-"||isItem.slice(-1)==="|"){IisHor=isItem.slice(-1)==="-";myArgsObj.string[i]=isItem.slice(0,-1)}if(isItem.slice(0,3)==="hor"||isItem.slice(0,3)==="ver")IisHor=isItem.slice(0,3)==="hor";else if(isItem==="swipeoff")swipe=false;else if(!Ilabel)Ilabel=myArgsObj.string[i];else if(!IpageTitle)IpageTitle=myArgsObj.string[i];if(isItem in Item.items){if(!myArgsObj["item"])myArgsObj["item"]=[];myArgsObj["item"].push(items[isItem])}}}if("start"in myArgsObj){Istart=myArgsObj.start[0];if(myArgsObj.start.length>1)Imin=myArgsObj.start[1];if(myArgsObj.start.length>2)Imax=myArgsObj.start[2];if(myArgsObj.start.length>3)liefsError.badArgs("Start, Min, Max","That, and more!","Create Instance Of Item() "+JSON.stringify(myArgsObj.start.slice(3)))}if("Item"in myArgsObj){Iitems=myArgsObj.Item}if("Container"in myArgsObj)Icontainer=myArgsObj.container[0];if(!Ilabel)Ilabel="item"+(Object.keys(Item.items).length/1e3).toFixed(3).slice(-3);if(!Istart)Istart="0px";if(Iitems&&Icontainer)liefsError.badArgs("items, or a container.","received both","Create Instance Of Item() "+Ilabel);if(Iitems){if(IisHor===undefined){newItem=new Item(Ilabel,Istart,Imin,Imax);newItem.pages=Iitems;newItem.pages.unshift(newItem);newItem.currentPage=0;for(var i=0;i<Iitems.length;i++)if(Iitems[i].el)onEvent(Iitems[i].el,"mousedown",function(e){Item.mouseDown(e,newItem)});return newItem}else{if(Iitems.length>1)Item.setDragBarDirection(Iitems[Iitems.length-1],false);Icontainer=new Container(Ilabel,IisHor,Iitems,Imargin)}}newItem=new Item(Ilabel,Istart,Imin,Imax,Icontainer);if(IpageTitle)newItem.pageTitle=IpageTitle;if(!dragFront)Item.setDragBarDirection(newItem,dragFront);if(!swipe)newItem.swipe=false;return newItem};Item.setDragBarDirection=function(item,direction){setTimeout(function(){if(item.dragBar)item.dragBar.front=direction},10)};Item.nextPage=function(item_,stop,changeUrl){if(stop===void 0){stop=false}if(changeUrl===void 0){changeUrl=true}var item=Item.parseItem(item_);if(item.currentPage+1<item.pages.length)Item.setPage(item,item.currentPage+1,changeUrl);else if(!stop)Item.setPage(item,0)};Item.backPage=function(item_,stop,changeUrl){if(stop===void 0){stop=false}if(changeUrl===void 0){changeUrl=true}var item=Item.parseItem(item_);if(item.currentPage>0)Item.setPage(item,item.currentPage-1);else if(!stop)Item.setPage(item,item.pages.length-1,changeUrl)};Item.setPage=function(item_,value,changeUrl){if(changeUrl===void 0){changeUrl=true}Item.parseValue(value,Item.parseItem(item_));if(changeUrl&&Handler.changeUrl)Handler.onPushState();Handler.resizeEvent()};Item.parseValue=function(value_,item){var foundPage=false;if(TypeOf(value_,"string")){for(var i=0;i<item.pages.length;i++)if(item.pages[i].label===value_){item.currentPage=i;foundPage=true;break}if(!foundPage)liefsError.badArgs("page id not found",value_,"Item setPage")}else{if(item.pages.length-1<value_)liefsError.badArgs("Max Pages for "+item.label+" is "+item.pages.length,value_.toString(),"Item setPage");item.currentPage=value_}};Item.parseItem=function(item_){var item;if(TypeOf(item_,"string")){if(!isItIn(item_,Item.items))liefsError.badArgs("Item Name Not Identified",item_,"Item - setPage()");item=Item.items[item_][0]}else item=item_;if(!item.pages)liefsError.badArgs("Item "+item.label+" to be defined with pages","it wasn't","Item - setPage()");return item};Item.page=function(item){return item.pages?item.pages[item.currentPage]:item};Item.prototype.toString=function(prefix,lf,pre){if(prefix===void 0){prefix=""}if(lf===void 0){lf="\n"}if(pre===void 0){pre="\t"}var i,titem;var inc='", "';var out=prefix+'I("'+this.label;if(this.start!=="0px")out+=inc+this.start;if(this.min)out+=inc+this.min+inc+this.max;if(this.container){out+='", '+this.container.margin.toString()+", "+lf;for(i=0;i<this.container.items.length;i++){titem=this.container.items[i];out+=titem.toString(pre+prefix,lf,pre);out+=(i<this.container.items.length-1?", ":"")+lf}out+=prefix+")"}else if(this.pages){out+='", '+lf;for(i=1;i<this.pages.length;i++){out+=this.pages[i].toString(pre+prefix,lf,pre);out+=(i<this.pages.length-1?", ":"")+lf}out+=prefix+")"}else{out+='")'}return out};Item.prototype.iterator=function(){return this.container?this.container.items:this.pages?this.pages:[]};return Item}();Item.PageTriggerSize=1;Item.isDown=false;Item.debug=true;Item.items={};var I=Item.I;var v=Item.v;var h=Item.h;var items=Item.items;var Container=function(){function Container(label,trueIsHor,items,margin){if(margin===void 0){margin=Container.marginDefault}this.items=[];this.selector=function(){return"#"+this.label};if(Handler.verbose)console.log("Defined Container"+label);this.label=label;this.direction=trueIsHor;this.items=items;this.margin=margin;Container.containers[label]=Container.lastDefined=this;this.itemsCheck();if(isUniqueSelector(this.selector()))this.el=document.querySelectorAll(this.selector())[0]}Container.iterator=function(){var retList=[];var keys=Object.keys(Container.containers);for(var i=0;i<keys.length;i++){retList.push(Container.containers[keys[i]])}return retList};Container.prototype.iterator=function(){return this.items};Container.of=function(item){var keys=Object.keys(Container.containers);var eachKey;for(var i=0;i<keys.length;i++){eachKey=keys[i];if(Container.containers[eachKey].items.indexOf(item)>-1)return Container.containers[eachKey]}if(Handler.verbose)console.log("Container of Error: Containers");if(Handler.verbose)console.log(Container.containers);if(Handler.verbose)console.log(item);return undefined};Container.get=function(label){if(label in Container.containers)return Container.containers[label];return undefined};Container.push=function(container){Container.containers[container.label]=container;return container};Container.fixed=function(container,width,height){var NOTDEFINED=-999;var fixed=0;var newSize=NOTDEFINED;var eachItem;var keys=container.items;for(var i=0;i<keys.length;i++){eachItem=keys[i];if(!eachItem.size)eachItem.size=new Coord;if(eachItem.current.slice(-2)==="px")newSize=parseInt(eachItem.current.slice(0,-2));if(newSize!==NOTDEFINED){fixed=fixed+newSize;eachItem.size.width=container.direction?newSize:width-container.margin*2;eachItem.size.height=container.direction?height-container.margin*2:newSize;newSize=NOTDEFINED}}return fixed};Container.percent=function(container,width,height,fixed){var max=container.direction?width:height;var pixelsLeftForPercent=max-fixed-container.margin*(container.items.length+1);var newPercent;var eachItem;var keys=container.items;for(var i=0;i<keys.length;i++){eachItem=keys[i];eachItem.lastDirection=container.direction;if(typeof eachItem.current==="string"&&eachItem.current.slice(-1)==="%"){newPercent=parseInt(eachItem.current.slice(0,-1));eachItem.size.width=container.direction?parseInt((pixelsLeftForPercent*(newPercent/100)).toFixed(0)):width-container.margin*2;eachItem.size.height=container.direction?height-container.margin*2:parseInt((pixelsLeftForPercent*(newPercent/100)).toFixed(0))}}};Container.fill=function(container,xOffset,yOffset){if(xOffset===void 0){xOffset=0}if(yOffset===void 0){yOffset=0}var margin=container.margin;var sum=margin;var eachItem;var keys=container.items;for(var i=0;i<keys.length;i++){eachItem=keys[i];if(container.direction){eachItem.size.x=xOffset+sum;sum=sum+eachItem.size.width+margin;eachItem.size.y=yOffset+margin}else{eachItem.size.x=xOffset+margin;eachItem.size.y=yOffset+sum;sum=sum+eachItem.size.height+margin}}};Container.updateRecursive=function(width,height,container,xOffset,yOffset,includeParents){if(xOffset===void 0){xOffset=0}if(yOffset===void 0){yOffset=0}if(includeParents===void 0){includeParents=false}var returnObject={};Container.percent(container,width,height,Container.fixed(container,width,height));Container.fill(container,xOffset,yOffset);var thisItem;var keys=container.items;for(var i=0;i<keys.length;i++){thisItem=keys[i];var width_1=thisItem.size.width+container.margin*2;var height_1=thisItem.size.height+container.margin*2;var x=thisItem.size.x-container.margin;var y=thisItem.size.y-container.margin;if("container"in thisItem&&thisItem["container"]){if(includeParents)returnObject[thisItem.label]=thisItem.size;var temp=Container.updateRecursive(width_1,height_1,thisItem.container,x,y);for(var attrname in temp)returnObject[attrname]=temp[attrname]}returnObject[thisItem.label]=thisItem.size}return returnObject};Container.root=function(){return Container.suspectedRoot?Container.suspectedRoot:Container.lastDefined};Container.prototype.toString=function(prefix,lf,pre){if(prefix===void 0){prefix=""}if(lf===void 0){lf="\n"}if(pre===void 0){pre="\t"}var titem=Item.get(this.label);return titem.toString(prefix,lf,pre)};Container.prototype.itemsCheck=function(){var totalPercent=0;var eachItem;var keys=this.items;for(var i=0;i<keys.length;i++){eachItem=keys[i];if(eachItem.start.slice(-1)==="%")totalPercent+=parseInt(eachItem.start.slice(0,-1))}if(totalPercent!==100)liefsError.badArgs(this.label+" to total 100%"," a total of "+totalPercent.toString()+"%","Container.itemsCheck()")};Container.prototype.update=function(width,height,xOffset,yOffset,includeParents){if(xOffset===void 0){xOffset=0}if(yOffset===void 0){yOffset=0}if(includeParents===void 0){includeParents=false}this.lastUpdate=Container.updateRecursive(width,height,this,xOffset,yOffset,includeParents)};Container.prototype.itemByLabel=function(label){var item;var keys=this.items;for(var i=0;i<keys.length;i++){item=keys[i];if(item.label===label)return item;else if(item.container&&item.container.itemByLabel(label))return item.container.itemByLabel(label)}return undefined};return Container}();Container.debug=true;Container.containers={};Container.marginDefault=4;var Layout=function(){function Layout(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}this.isActive=true;this.setArgsObj=setArgsObj;if(TypeOf(arguments[0]).slice(0,5)==="array"){this.myArgsObj=argsObj(arguments[0])}else this.myArgsObj=argsObj(arguments);this.label=this.setArgsObj("string",0,"layout ");this.conditionalFunction=this.setArgsObj("function",0,"layout ");this.container=this.setArgsObj("Container",0,"layout ");if("Item"in this.myArgsObj){this.container=this.myArgsObj.Item[0].container;if(!this.container)throw liefsError.badArgs("Container or Item-Parent of Container","Item - not the Parent of a Container","New Layout"+(this.label?" '"+this.label+"'":""))}if(!(this.container&&this.conditionalFunction)){liefsError.badArgs("At Least One Function and One Item/Container",JSON.stringify(Object.keys(this.myArgsObj)),"Create Instance Of Layout()")}}Layout.prototype.iterator=function(){return this.container.iterator()};Layout.prototype.toString=function(prefix,lf,pre){if(prefix===void 0){prefix=""}if(lf===void 0){lf="\n"}if(pre===void 0){pre="\t"}var i;var fasst;var out=prefix+'L("'+this.label+'", '+lf;out+=prefix+this.container.toString(prefix+pre,lf,pre)+","+lf;fasst=replaceAll(this.conditionalFunction.toString(),"  "," ");fasst=replaceAll(fasst,"\n","");fasst=replaceAll(fasst,"\t","");out+=prefix+pre+fasst+lf;out+=prefix+")";return out};return Layout}();function L(){var Arguments=[];for(var _i=0;_i<arguments.length;_i++){Arguments[_i]=arguments[_i]}return new Layout(Arguments)}
